{% extends 'base.html' %}
{% load static %}

{% block title %}
    TECH SHOP - Профіль
{% endblock  %}

{% block cart_nav %}
{% endblock  %}

{% block cart_modal %}
{% endblock  %}


{% block content %}
<div class="row justify-content-center">
    <div class="col-12 col-lg-5" style="margin-bottom: 32px;">
        {% block profile %}
        <div class="profile-info">
                {% if user.image %}
                <img src="{{ user.image.url }}" alt="{{ user.first_name }} photo" class='profile-pic'>
                {% else %}
                <img src="{% static 'users/default-avatar-profile.jpg' %}" alt="default profile pic" class='profile-pic'>
                {% endif %}
            <p>
                <span class="profile-label">Ім'я:</span><br>
                {{ user.first_name }}
            </p>
            <p>
                <span class="profile-label">Прізвище:</span><br>
                {{ user.last_name }}
            </p>
            <p>
                <span class="profile-label">Ел. пошта:</span><br>
                {{ user.email }}
            </p>
            <p>
                <span class="profile-label">Номер телефону:</span><br>
                {{ user.phone_number }}
            </p>
        </div>
            <a href="{% url "users:edit_profile" %}" class="btn btn-primary" style="width: 100%;">Редагувати профіль</a>
        {% endblock  %}
    </div>
    <div class="col-12 col-lg-7">
        <h3 style="padding-left: 15px;">Моя корзина</h3>
        <div id="cart-items-container">
            {% include 'carts/includes/cart.html' %}
        </div>
    </div>
    <div class="col-12 col-md-9 mt-3">
        <h3>Історія замовлень</h3>
        <div class="accordion" id="accordionPanelsStayOpenExample">
            {% for order in request.user.orders.all %}
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse{{ order.id }}" aria-expanded="false" aria-controls="panelsStayOpen-collapse{{ order.id }}">
                  Замовлення №{{ order.id }} від {{ order.created }}
                </button>
              </h2>
              <div id="panelsStayOpen-collapse{{ order.id }}" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <strong>This is the first item's accordion body.</strong> It is shown by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
                </div>
              </div>
            </div>
            {% empty %}
            <p>Ви ще не робили жодного замовлення</p>
            {% endfor %} 
        </div>


        

    </div>
</div>
{% endblock  %}